{#
    Reusable pagination component

    Parameters:
    - currentPage (required): Current page number
    - totalPages (required): Total number of pages
    - total (required): Total number of items
    - perPage (required): Items per page
    - itemsCount (required): Number of items on current page
    - entityName (optional): Name of entity type (default: 'Items')
    - ariaLabel (optional): Accessibility label for navigation (default: 'Pagination')
#}
<div class="mt-3 d-flex justify-content-between align-items-center pagination-wrapper">
    <p class="text-muted mb-0">
        <strong>Total {{ entityName|default('Items') }}:</strong> {{ total }}
        {% if itemsCount > 0 %}
            <small>(Showing {{ (currentPage - 1) * perPage + 1 }}-{{ min(currentPage * perPage, total) }} of {{ total }})</small>
        {% endif %}
    </p>

    {% if totalPages > 1 %}
        <nav aria-label="{{ ariaLabel|default('Pagination') }}">
            <ul class="pagination pagination-sm mb-0">
                {# First and Previous buttons #}
                {% if currentPage > 1 %}
                    <li class="page-item">
                        <a class="page-link" href="#" data-page="1" aria-label="First">
                            <span aria-hidden="true">&laquo;&laquo;</span>
                        </a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" href="#" data-page="{{ currentPage - 1 }}" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% else %}
                    <li class="page-item disabled">
                        <span class="page-link">&laquo;&laquo;</span>
                    </li>
                    <li class="page-item disabled">
                        <span class="page-link">&laquo;</span>
                    </li>
                {% endif %}

                {# Page numbers with ellipsis #}
                {% set showPages = 5 %}
                {% set startPage = max(1, currentPage - 2) %}
                {% set endPage = min(totalPages, currentPage + 2) %}

                {# First page if not in range #}
                {% if startPage > 1 %}
                    <li class="page-item">
                        <a class="page-link" href="#" data-page="1">1</a>
                    </li>
                    {% if startPage > 2 %}
                        <li class="page-item disabled">
                            <span class="page-link">...</span>
                        </li>
                    {% endif %}
                {% endif %}

                {# Page number buttons #}
                {% for page in startPage..endPage %}
                    {% if page == currentPage %}
                        <li class="page-item active">
                            <span class="page-link">{{ page }}</span>
                        </li>
                    {% else %}
                        <li class="page-item">
                            <a class="page-link" href="#" data-page="{{ page }}">{{ page }}</a>
                        </li>
                    {% endif %}
                {% endfor %}

                {# Last page if not in range #}
                {% if endPage < totalPages %}
                    {% if endPage < totalPages - 1 %}
                        <li class="page-item disabled">
                            <span class="page-link">...</span>
                        </li>
                    {% endif %}
                    <li class="page-item">
                        <a class="page-link" href="#" data-page="{{ totalPages }}">{{ totalPages }}</a>
                    </li>
                {% endif %}

                {# Next and Last buttons #}
                {% if currentPage < totalPages %}
                    <li class="page-item">
                        <a class="page-link" href="#" data-page="{{ currentPage + 1 }}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" href="#" data-page="{{ totalPages }}" aria-label="Last">
                            <span aria-hidden="true">&raquo;&raquo;</span>
                        </a>
                    </li>
                {% else %}
                    <li class="page-item disabled">
                        <span class="page-link">&raquo;</span>
                    </li>
                    <li class="page-item disabled">
                        <span class="page-link">&raquo;&raquo;</span>
                    </li>
                {% endif %}
            </ul>
        </nav>
    {% endif %}
</div>
